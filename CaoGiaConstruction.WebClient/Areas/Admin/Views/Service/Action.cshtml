@model Service
@{
    var serviceCategories = ViewBag.ServiceCategories as List<ServiceCategory>;
    ViewData["Title"] = "Chỉnh sửa";
}
<div class="content">

    <!-- Start Content-->
    <div class="container-fluid">

        <!-- start page title -->
        <div class="row">
            <div class="col-12">
                <div class="page-title-box">
                    <div class="page-title-right">
                        <ol class="breadcrumb m-0">
                            <li class="breadcrumb-item"><a asp-route="admin-default">Trang chủ</a></li>
                            <li class="breadcrumb-item"><a asp-route="admin-service">Quản lý dịch vụ</a></li>
                            <li class="breadcrumb-item active">Sản phẩm</li>
                        </ol>
                    </div>
                    <h4 class="page-title">Thông tin dịch vụ</h4>
                </div>
            </div>
        </div>
        <!-- end page title -->

        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <form id="form-service">
                            <div class="row">
                                <div class="col-lg-12">
                                    <ul class="nav nav-tabs nav-bordered mb-3 sticky-header-top">
                                        <li class="nav-item">
                                            <a href="#tab-info" data-bs-toggle="tab" aria-expanded="false"
                                                class="nav-link active">
                                                <i class="mdi mdi-home-variant d-md-none d-block"></i>
                                                <span class="d-none d-md-block">Thông tin chung</span>
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a href="#tab-gallery" data-bs-toggle="tab" aria-expanded="true"
                                                class="nav-link ">
                                                <i class="mdi mdi-account-circle d-md-none d-block"></i>
                                                <span class="d-none d-md-block">Hình ảnh dịch vụ</span>
                                            </a>
                                        </li>

                                        <li class="nav-item">
                                            <a href="#tab-content" data-bs-toggle="tab" aria-expanded="true"
                                                class="nav-link ">
                                                <i class="mdi mdi-account-circle d-md-none d-block"></i>
                                                <span class="d-none d-md-block">Nội dung dịch vụ</span>
                                            </a>
                                        </li>

                                    </ul>

                                    <div class="tab-content">
                                        <div class="tab-pane show active" id="tab-info">
                                            <div class="mb-3"><i>Lưu ý: </i>(<span class="text-danger">*</span>) là
                                                trường bắt buộc nhập</div>
                                            <input class="form-control" value="@Model.Id" id="serviceId" name="id"
                                                type="hidden" placeholder="Vui lòng nhập">
                                            <div class="row">
                                                <div class="col-9">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="mb-3">
                                                                <label for="billing-first-name" class="form-label">Tên
                                                                    dịch vụ
                                                                    <span class="text-danger">*</span></label>
                                                                <input class="form-control" value="@Model.Title"
                                                                    name="title" type="text"
                                                                    placeholder="Vui lòng nhập">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <div class="mb-3 form-select-validate">
                                                                <label for="billing-first-name" class="form-label">Loại
                                                                    dịch vụ
                                                                    <span class="text-danger">*</span></label>
                                                                <select class="form-control select2"
                                                                    name="serviceCategoryId" data-toggle="select2">
                                                                    <option value="0">---Tất cả---</option>
                                                                    @foreach (var item in serviceCategories)
                                                                    {
                                                                        <option value="@item.Id"
                                                                            selected="@(item.Id == Model.ServiceCategoryId)">
                                                                            @item.Title</option>
                                                                    }
                                                                </select>
                                                            </div>
                                                        </div>

                                                        <div class="col-md-12">
                                                            <div class="mb-3">
                                                                <label for="billing-first-name" class="form-label">Mô tả
                                                                    ngắn
                                                                    <span class="text-danger">*</span></label>
                                                                <textarea class="form-control" name="description"
                                                                    rows="3"
                                                                    placeholder="Vui lòng nhập">@Model.Description</textarea>
                                                            </div>
                                                        </div>
                                                    </div> <!-- end row -->
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <div class="mb-3">
                                                                <label for="billing-email-address"
                                                                    class="form-label">Giá hiện
                                                                    tại </label>
                                                                <input class="form-control" value="@Model.Price"
                                                                    name="price" data-toggle="input-mask"
                                                                    data-mask-format="000.000.000.000.000 đ"
                                                                    data-reverse="true" type="text"
                                                                    placeholder="Vui lòng nhập">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="mb-3">
                                                                <label for="billing-email-address"
                                                                    class="form-label">Giá cũ
                                                                </label>
                                                                <input class="form-control" value="@Model.OldPrice"
                                                                    name="oldPrice" data-toggle="input-mask"
                                                                    data-mask-format="000.000.000.000.000 đ"
                                                                    data-reverse="true" type="text"
                                                                    placeholder="Vui lòng nhập">
                                                            </div>
                                                        </div>

                                                        <div class="col-md-4">
                                                            <div class="mb-3">
                                                                <label for="billing-email-address" class="form-label">Số
                                                                    lượng</label>
                                                                <input class="form-control" value="@Model.Quantity"
                                                                    name="quantity" type="number"
                                                                    placeholder="Vui lòng nhập">
                                                            </div>
                                                        </div>
                                                    </div> <!-- end row -->
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <div class="mb-3">
                                                                <label for="billing-email-address" class="form-label">
                                                                    Đơn vị tính
                                                                    <span class="text-danger">*</span>
                                                                </label>
                                                                <input class="form-control" value="@Model.Unit"
                                                                    type="text" name="unit" placeholder="Hộp, viên ...">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="mb-3">
                                                                <label for="billing-email-address" class="form-label">
                                                                    Quy cách
                                                                </label>
                                                                <input class="form-control"
                                                                    value="@Model.Specifications" name="specifications"
                                                                    type="text" placeholder="Hộp 30 viên">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">

                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <div class="mb-3">
                                                                <label for="billing-email-address" class="form-label">
                                                                    Thương hiệu
                                                                </label>
                                                                <input class="form-control" value="@Model.Brand"
                                                                    name="Brand" type="text"
                                                                    placeholder="Nhập tên thương hiệu (vd: Ý)">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div class="mb-3">
                                                                <label for="billing-email-address" class="form-label">
                                                                    Nhà sản xuất
                                                                </label>
                                                                <input class="form-control" value="@Model.Producer"
                                                                    name="producer" type="text"
                                                                    placeholder="Nhập tên nhà sản xuất (vd: Delonghi)">
                                                            </div>
                                                        </div>

                                                        <div class="col-md-4">
                                                            <div class="mb-3">
                                                                <label for="billing-email-address"
                                                                    class="form-label">Xuất
                                                                    xứ</label>
                                                                <input class="form-control" value="@Model.Origin"
                                                                    name="origin" type="text"
                                                                    placeholder="Nhập nơi xuất xứ (vd: Việt Nam, Ý, USA...)">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row ">
                                                        <div class="col-12">
                                                            <div class="mb-3">
                                                                <label for="billing-email-address"
                                                                    class="form-label">Trạng
                                                                    thái: &nbsp;</label>
                                                                <br />
                                                                <div>
                                                                    <input type="checkbox" id="status-active"
                                                                    @(((Model.Status == StatusEnum.Active) ||
                                                                        (Model.Status == null)) ? "checked" : "")
                                                                        name="status" class="switch-status"
                                                                        data-switch="success">
                                                                    <label for="status-active" data-on-label="Yes"
                                                                        data-off-label="No"
                                                                        class="mb-0 d-block"></label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-3">
                                                    <div class="row">
                                                        <div class="col-12">
                                                            <div class="upload-file-wrap">
                                                                <label class="form-label mb-2">Ảnh đại diện</label>
                                                                <!-- File Upload -->
                                                                <div class="upload-file" style="height:400px">
                                                                    <div class="image-preview-wrap">
                                                                        <img src="@Model.Avatar.ToHostImage()"
                                                                            class="image-preview" />
                                                                        <input type="hidden" name="avatar"
                                                                            value="@Model.Avatar" />
                                                                    </div>
                                                                </div>
                                                                <div class="mt-3">
                                                                    <div class="input-group">
                                                                        <input name="file" type="file"
                                                                            class="form-control select-file"
                                                                            accept="image/*" />
                                                                        <button class="btn btn-danger btn-delete-file"
                                                                            type="button">
                                                                            <i class="mdi mdi-trash-can"></i>
                                                                        </button>
                                                                    </div>

                                                                </div>

                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>

                                            </div>

                                        </div>
                                        <div class="tab-pane" id="tab-gallery">
                                            <div class="col-12 ">
                                                <div id="wrap-file">
                                                    <input accept="image/*" multiple="" type="file" tabindex="-1"
                                                        style="display: none;" id="file_upload">
                                                    <div class=" d-flex">
                                                        <div class="upload-file">
                                                            <i class="mdi mdi-plus"></i>
                                                        </div>
                                                        <div id="template-file" class=" d-flex flex-wrap">
                                                        </div>
                                                    </div>
                                                    @if (!Model.ImageList.IsNullOrEmpty())
                                                    {
                                                        var imageList = Model.ImageList.SplitToText(";");
                                                        <div>
                                                            <label>Ảnh đã tải lên (<span>Có thể kéo thả <i
                                                                        class="mdi mdi-image-move"></i> để sắp xếp vị
                                                                    trí
                                                                    của hình</span>)</label>
                                                            <div class="d-flex mt-2 drag-image-wrap">
                                                                @foreach (var item in imageList)
                                                                {
                                                                    <div class="file-item-upload" data-index="0"
                                                                        data-path="@item.Text">
                                                                        <a href="~/@item.Text" class="fancybox"
                                                                            data-fancybox="gallery">
                                                                            <img src="~/@item.Text">

                                                                        </a>
                                                                        <div class="circle-close  btn-remove-image-server"
                                                                            data-id="@Model.Id" data-path="@item.Text">
                                                                            <i class="mdi mdi-close-circle"></i>
                                                                        </div>
                                                                    </div>
                                                                }
                                                            </div>
                                                            <div class="mb-2 mt-2"><i>Lưu ý: </i> <strong>Ảnh đại
                                                                    diện</strong> của dịch vụ là hình ảnh được sắp sếp
                                                                theo
                                                                thứ tự <strong>đầu tiên</strong></div>
                                                        </div>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                        <div class="tab-pane" id="tab-content">
                                            <textarea style="height: 100%; width: 100%" class="tinyeditor"
                                                name="Content" data-folder="@Commons.FILE_UPLOAD/service/content/">
                                                @Model.Content
                                              </textarea>

                                        </div>
                                    </div>

                                </div>

                            </div>
                            <div class="row mt-4">
                                <div class="col-sm-6">
                                    <a asp-route="admin-service"
                                        class="btn text-muted d-none d-sm-inline-block btn-link fw-semibold">
                                        <i class="mdi mdi-arrow-left"></i> Quay lại danh sách dịch vụ
                                    </a>
                                </div> <!-- end col -->
                                <div class="col-sm-6">
                                    <div class="text-sm-end">
                                        <button type="submit" class="btn btn-success ladda-button"
                                            data-style="expand-right" id="btn-save">
                                            <i class="mdi mdi-content-save"></i> Lưu lại
                                        </button>
                                    </div>
                                </div> <!-- end col -->
                            </div>
                        </form>
                    </div> <!-- end card-body-->
                </div> <!-- end card-->
            </div> <!-- end col -->
        </div>
        <!-- end row -->

    </div> <!-- container -->

</div> <!-- content -->

@section styles {
    <!-- validate css -->
    <link href="~/Admin/assets/vendor/validation/js/jquery.validate.css" rel="stylesheet" />
    <!-- Select2 css -->
    <link href="~/Admin/assets/vendor/select2/css/select2.min.css" rel="stylesheet" type="text/css" />
    <!-- ladda css -->
    <link href="~/Admin/assets/vendor/ladda-master/dist/ladda.min.css" rel="stylesheet" />
    <link href="~/Admin/assets/vendor/ladda-master/dist/ladda-themeless.min.css" rel="stylesheet" />
    @* upload file mutiple *@
    <link href="~/Admin/assets/js/commons/upload-file-multiple/upload-file-multiple.css" rel="stylesheet"
        asp-append-version="true" />
    <link href="~/Admin/assets/js/commons/upload-file-single/upload-file-single.css" rel="stylesheet"
        asp-append-version="true" />
}

@section scripts {
    <!-- validate js -->
    <script src="~/Admin/assets/vendor/validation/js/jquery.validate.min.js"></script>
    <!--  Select2 Js -->
    <script src="~/Admin/assets/vendor/select2/js/select2.min.js"></script>
    @* mask *@
    <script src="~/Admin/assets/vendor/jquery-mask-plugin/jquery.mask.min.js"></script>
    @* dragarrange *@
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    @* upload file mutiple *@
    <script src="~/Admin/assets/js/commons/upload-file-multiple/upload-file-multiple.js" asp-append-version="true">
    </script>
    <script src="~/Admin/assets/js/commons/upload-file-single/upload-file-single.js" asp-append-version="true"></script>
    @* tinyeditor *@
    <script src="~/Admin/assets/vendor/tinyeditor/1.jquery.tinymce.min.js"></script>
    <script src="~/Admin/assets/vendor/tinyeditor/2.tinymce.min.js"></script>
    <script src="~/Admin/assets/vendor/tinyeditor/3.tinymce.customfunction.js"></script>
    <script src="~/Admin/assets/vendor/tinyeditor/4.upload-file.js"></script>
    <script src="~/Admin/assets/vendor/tinyeditor/dataconfig.js"></script>
    <!-- ladda js -->
    <script src="~/Admin/assets/vendor/ladda-master/dist/spin.min.js"></script>
    <script src="~/Admin/assets/vendor/ladda-master/dist/ladda.jquery.min.js"></script>
    @* service controller *@
    <script src="~/Admin/assets/js/controllers/service-controller.js" asp-append-version="true"></script>
}