@inject IAboutService _aboutService;
@inject ISettingService _settingService;
@using CaoGiaConstruction.Utilities
@{
    var about = await _aboutService.GetAboutCacheAsync();
    var setting = await _settingService.GetSettingCacheAsync();
    var primaryColor = setting?.PrimaryColor ?? "#007bff";
    var secondaryColor = setting?.SecondaryColor ?? "#6c757d";
    
    // Convert hex to RGB for CSS variables
    string primaryRgb = "0, 123, 255"; // Default blue
    string secondaryRgb = "108, 117, 125"; // Default gray
    if (!string.IsNullOrEmpty(primaryColor) && primaryColor.StartsWith("#"))
    {
        try
        {
            var hex = primaryColor.TrimStart('#');
            if (hex.Length == 6)
            {
                var r = Convert.ToInt32(hex.Substring(0, 2), 16);
                var g = Convert.ToInt32(hex.Substring(2, 2), 16);
                var b = Convert.ToInt32(hex.Substring(4, 2), 16);
                primaryRgb = $"{r}, {g}, {b}";
            }
        }
        catch
        {
            // Keep default if conversion fails
        }
    }
    if (!string.IsNullOrEmpty(secondaryColor) && secondaryColor.StartsWith("#"))
    {
        try
        {
            var hex = secondaryColor.TrimStart('#');
            if (hex.Length == 6)
            {
                var r = Convert.ToInt32(hex.Substring(0, 2), 16);
                var g = Convert.ToInt32(hex.Substring(2, 2), 16);
                var b = Convert.ToInt32(hex.Substring(4, 2), 16);
                secondaryRgb = $"{r}, {g}, {b}";
            }
        }
        catch
        {
            // Keep default if conversion fails
        }
    }
}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>
        @ViewData["Title"]  - CaoGiaConstruction
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="Coderthemes" name="author" />

    <!-- App favicon -->
    <link rel="shortcut icon" href="~/favicon.ico">

    <link href="~/Admin/assets/css/full-css-import.css" rel="stylesheet" />

    <!-- Theme Config Js -->
    <script src="~/Admin/assets/js/hyper-config.js"></script>
    @RenderSection("styles", required: false)

    <!-- App css -->
    <link href="~/Admin/assets/css/app-saas.min.css" rel="stylesheet" type="text/css" id="app-style" />
    <link href="~/Admin/assets/css/custom.css" rel="stylesheet" />

    <!-- Dynamic Primary Color from Setting -->
    <style>
        :root {
            --ct-primary: @primaryColor !important;
            --ct-primary-rgb: @primaryRgb !important;
            --caogia-primary-color: @primaryColor !important;
            --caogia-secondary-color: @secondaryColor !important;
            --ct-menu-item-active-color: var(--caogia-secondary-color) !important;
            --ct-menu-item-hover-color: var(--caogia-secondary-color) !important;
            --ct-topbar-item-hover-color: var(--caogia-secondary-color) !important;
            --ct-link-hover-color: var(--caogia-secondary-color) !important;
        }
        .bg-primary {
            background-color: @primaryColor !important;
        }
        .text-primary {
            color: @primaryColor !important;
        }
        .btn-primary {
            background-color: @primaryColor !important;
            border-color: @primaryColor !important;
        }
        .btn-primary:hover {
            background-color: @primaryColor !important;
            border-color: @primaryColor !important;
            opacity: 0.9;
        }
        .border-primary {
            border-color: @primaryColor !important;
        }
    </style>

</head>

<body>

    <!-- Begin page -->
    <div class="wrapper">

        <!-- ========== Topbar Start ========== -->
        <partial name="~/Areas/Admin/Views/Shared/_TopBarMenu.cshtml" model="about" />
        <!-- ========== Topbar End ========== -->
        <!-- ========== Left Sidebar Start ========== -->
        <partial name="~/Areas/Admin/Views/Shared/_LeftSideMenu.cshtml" />
        <!-- ========== Left Sidebar End ========== -->
        <!-- ============================================================== -->
        <!-- Start Page Content here -->
        <!-- ============================================================== -->
        <div class="content-page">
            @RenderBody()
            <!-- Footer Start -->
            <partial name="~/Areas/Admin/Views/Shared/_Footer.cshtml" model="about"/>
            <!-- end Footer -->
        </div>
        <!-- ============================================================== -->
        <!-- End Page content -->
        <!-- ============================================================== -->
        <!-- Footer Start -->
        <!-- end Footer -->
    </div>
    <!-- END wrapper -->
    <partial name="~/Areas/Admin/Views/Shared/_ThemeSetting.cshtml" />


    <!-- #region js -->
    <!-- Vendor js -->
    <script src="~/Admin/assets/js/jquery-3.0.0.js"></script>
    <script src="~/Admin/assets/js/vendor.min.js"></script>

    <!-- Toastr Demo js -->
    <script src="~/Admin/assets/vendor/jquery-toast-plugin/jquery.toast.min.js"></script>
    <!-- confirm js -->
    <script src="~/Admin/assets/vendor/jquery-confirm/jquery-confirm.min.js"></script>
    <!-- fancybox js -->
    <script src="~/Admin/assets/vendor/fancybox/jquery.fancybox.min.js"></script>

    <!-- commons-utility -->
    <script src="~/Admin/assets/js/commons/commons-utility.js"></script>
    @* render section script *@
    @RenderSection("scripts", required: false)

    <!-- Product Demo App js -->
    <!-- App js -->
    <script src="~/Admin/assets/js/app.min.js"></script>

    <!-- #endregion -->

</body>

</html> 