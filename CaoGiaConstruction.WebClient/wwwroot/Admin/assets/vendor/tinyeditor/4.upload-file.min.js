$(function() {
    $(".file-input").on("change", function() {
        var t, i;
        let n = this;
        showLoading("Đang tải ảnh lên !");
        t = $(this).get(0).files;
        t.length && (i = new FormData, i.append("image", t[0]), setTimeout(function() {
            var t = `/admin/file/uploadfile?pathFolder=`;
            $.ajax({
                "async": !1,
                crossDomain: !0,
                processData: !1,
                contentType: !1,
                data: i,
                type: "POST",
                url: t,
                headers: {
                    Accept: "application/json"
                },
                mimeType: "multipart/form-data"
            }).done(function(t) {
                hideLoading();
                $(n).val("");
                var i = JSON.parse(t);
                $(n).closest(".file-upload-container").find(".wrap-animate").addClass("show");
                $(n).closest(".file-upload-container").find(".file-url-output").val(i.Data);
                $(n).closest(".file-upload-container").find(".avatar-preview").attr("src", `/${i.Data}`);
                $(n).closest(".file-upload-container").find(".lightbox-preview").attr("href", `/${i.Data}`);
                hideLoading()
            }).fail(() => {
                $(n).val(""), toastr.error("Lỗi khi tải ảnh lên! Vui lòng thử lại"), hideLoading()
            })
        }, 1e3))
    })
});